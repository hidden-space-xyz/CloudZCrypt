<Window
    x:Class="CloudZCrypt.WPF.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="clr-namespace:CloudZCrypt.WPF.Behaviors"
    xmlns:converters="clr-namespace:CloudZCrypt.WPF.Converters"
    Title="CloudZCrypt - File Encryption Tool"
    Width="900"
    Height="585"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterScreen">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <!--  File/Directory Selection Section  -->
        <Grid Grid.Row="0" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <!--  Source File/Directory  -->
            <TextBlock
                Grid.Row="0"
                FontWeight="Bold"
                Text="Select File or Directory to Process:" />
            <DockPanel Grid.Row="1" Margin="0,5,0,10">
                <Grid DockPanel.Dock="Right">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Button
                        Name="SelectFileButton"
                        Grid.Column="0"
                        Margin="5,0,0,0"
                        Command="{Binding SelectSourceFileCommand}"
                        Content="📄"
                        Foreground="LimeGreen"
                        IsEnabled="{Binding AreControlsEnabled}"
                        ToolTip="File" />
                    <Button
                        Name="SelectDirectoryButton"
                        Grid.Column="1"
                        Margin="5,0,0,0"
                        Command="{Binding SelectSourceDirectoryCommand}"
                        Content="📁"
                        Foreground="LimeGreen"
                        IsEnabled="{Binding AreControlsEnabled}"
                        ToolTip="Directory" />
                </Grid>
                <TextBox
                    x:Name="SourceFilePathBox"
                    Padding="5"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    IsReadOnly="True"
                    Text="{Binding SourceFilePath}" />
            </DockPanel>
            <!--  Destination Path  -->
            <TextBlock
                Grid.Row="2"
                FontWeight="Bold"
                Text="Destination Path:" />
            <DockPanel Grid.Row="3" Margin="0,5,0,10">
                <Button
                    Name="SelectDestinationButton"
                    Margin="5,0,0,0"
                    Command="{Binding SelectDestinationPathCommand}"
                    Content="📂"
                    DockPanel.Dock="Right"
                    Foreground="LimeGreen"
                    IsEnabled="{Binding AreControlsEnabled}" />
                <TextBox
                    x:Name="DestinationPathBox"
                    Padding="5"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    IsReadOnly="True"
                    Text="{Binding DestinationPath}" />
            </DockPanel>
        </Grid>
        <!--  Encryption Settings Section  -->
        <Grid Grid.Row="1" Margin="10,0,10,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid Grid.Column="0" Margin="0,0,10,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock
                    Grid.Row="0"
                    HorizontalAlignment="Left"
                    FontWeight="Bold"
                    Text="Encryption Algorithm:" />
                <ComboBox
                    x:Name="AlgorithmComboBox"
                    Grid.Row="1"
                    Margin="0,5,0,0"
                    Padding="5"
                    HorizontalAlignment="Stretch"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ItemsSource="{Binding AvailableEncryptionAlgorithms}"
                    SelectedValue="{Binding SelectedEncryptionAlgorithm}"
                    SelectedValuePath="Id"
                    ToolTipService.ShowDuration="60000">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock
                                    Grid.Row="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Foreground="LimeGreen"
                                    Text="{Binding DisplayName}" />
                                <TextBlock
                                    Grid.Row="1"
                                    FontSize="10"
                                    Foreground="LightGray"
                                    Text="{Binding Summary}" />
                            </Grid>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                    <ComboBox.ToolTip>
                        <ItemsControl ItemsSource="{Binding AvailableEncryptionAlgorithms}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="2,2,2,4">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="LimeGreen"
                                            Text="{Binding DisplayName}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            FontSize="11"
                                            Foreground="LightGray"
                                            Text="{Binding Description}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ComboBox.ToolTip>
                </ComboBox>
            </Grid>
            <Grid Grid.Column="1" Margin="5,0,5,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock
                    Grid.Row="0"
                    HorizontalAlignment="Left"
                    FontWeight="Bold"
                    Text="Key Derivation Algorithm:" />
                <ComboBox
                    x:Name="KeyDerivationAlgorithmComboBox"
                    Grid.Row="1"
                    Margin="0,5,0,0"
                    Padding="5"
                    HorizontalAlignment="Stretch"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ItemsSource="{Binding AvailableKeyDerivationAlgorithms}"
                    SelectedValue="{Binding SelectedKeyDerivationAlgorithm}"
                    SelectedValuePath="Id"
                    ToolTipService.ShowDuration="60000">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <TextBlock
                                    Grid.Row="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Foreground="LimeGreen"
                                    Text="{Binding DisplayName}" />
                                <TextBlock
                                    Grid.Row="1"
                                    FontSize="10"
                                    Foreground="LightGray"
                                    Text="{Binding Summary}" />
                            </Grid>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                    <ComboBox.ToolTip>
                        <ItemsControl ItemsSource="{Binding AvailableKeyDerivationAlgorithms}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="2,2,2,4">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="LimeGreen"
                                            Text="{Binding DisplayName}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            FontSize="11"
                                            Foreground="LightGray"
                                            Text="{Binding Description}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ComboBox.ToolTip>
                </ComboBox>
            </Grid>
            <!--  Name Obfuscation  -->
            <Grid Grid.Column="2" Margin="10,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock
                    Grid.Row="0"
                    HorizontalAlignment="Left"
                    FontWeight="Bold"
                    Text="Name Obfuscation:" />
                <ComboBox
                    x:Name="NameObfuscationComboBox"
                    Grid.Row="1"
                    Margin="0,5,0,0"
                    Padding="5"
                    HorizontalAlignment="Stretch"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ItemsSource="{Binding AvailableNameObfuscationModes}"
                    SelectedValue="{Binding SelectedNameObfuscationMode}"
                    SelectedValuePath="Id"
                    ToolTipService.ShowDuration="60000">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Margin="2">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <TextBlock
                                    Grid.Row="0"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    Foreground="LimeGreen"
                                    Text="{Binding DisplayName}" />
                                <TextBlock
                                    Grid.Row="1"
                                    FontSize="10"
                                    Foreground="LightGray"
                                    Text="{Binding Summary}" />
                            </Grid>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                    <ComboBox.ToolTip>
                        <ItemsControl ItemsSource="{Binding AvailableNameObfuscationModes}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="2,2,2,4">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto" />
                                            <RowDefinition Height="Auto" />
                                        </Grid.RowDefinitions>
                                        <TextBlock
                                            Grid.Row="0"
                                            FontSize="14"
                                            FontWeight="Bold"
                                            Foreground="LimeGreen"
                                            Text="{Binding DisplayName}" />
                                        <TextBlock
                                            Grid.Row="1"
                                            FontSize="11"
                                            Foreground="LightGray"
                                            Text="{Binding Description}"
                                            TextWrapping="Wrap" />
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ComboBox.ToolTip>
                </ComboBox>
            </Grid>
        </Grid>
        <!--  Password Section  -->
        <Grid Grid.Row="2" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <!--  Password Input  -->
            <TextBlock
                Grid.Row="0"
                FontWeight="Bold"
                Text="Password:" />
            <DockPanel Grid.Row="1" Margin="0,5,0,0">
                <Button
                    Name="GeneratePasswordButton"
                    Margin="5,0,0,0"
                    Command="{Binding GenerateStrongPasswordCommand}"
                    Content="🔄"
                    DockPanel.Dock="Right"
                    Foreground="LimeGreen"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ToolTip="Generate strong password (128 chars)" />
                <Button
                    Name="TogglePasswordVisibilityButton"
                    Margin="5,0,0,0"
                    Command="{Binding TogglePasswordVisibilityCommand}"
                    Content="{Binding IsPasswordVisible, Converter={x:Static converters:BoolToEyeEmojiConverter.Instance}}"
                    DockPanel.Dock="Right"
                    Foreground="LimeGreen"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ToolTip="Toggle password visibility" />
                <PasswordBox
                    x:Name="PasswordBox"
                    Height="30"
                    Padding="5"
                    behaviors:PasswordBoxBehavior.AnalyzeStrength="True"
                    behaviors:PasswordBoxBehavior.Attach="True"
                    behaviors:PasswordBoxBehavior.Password="{Binding Password, Mode=TwoWay}"
                    behaviors:PasswordBoxBehavior.PasswordService="{Binding PasswordService}"
                    DockPanel.Dock="Top"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    Visibility="{Binding IsPasswordVisible, Converter={x:Static converters:BoolToVisibilityConverter.InstanceInverted}}" />
                <TextBox
                    x:Name="PasswordTextBox"
                    Height="30"
                    Padding="5"
                    DockPanel.Dock="Top"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    Text="{Binding Password, Mode=TwoWay}"
                    Visibility="{Binding IsPasswordVisible, Converter={x:Static converters:BoolToVisibilityConverter.Instance}}" />
            </DockPanel>
            <!--  Password Strength Indicator  -->
            <Grid
                Grid.Row="2"
                Margin="0,2,0,10"
                Visibility="{Binding ElementName=PasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthVisibility)}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <ProgressBar
                    Grid.Row="0"
                    Height="5"
                    Background="Transparent"
                    BorderThickness="0"
                    Foreground="{Binding ElementName=PasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthColor)}"
                    Maximum="100"
                    Minimum="0"
                    Value="{Binding ElementName=PasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthScore)}" />
                <TextBlock
                    Grid.Row="1"
                    FontSize="11"
                    Foreground="{Binding ElementName=PasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthColor)}"
                    Text="{Binding ElementName=PasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthText)}" />
            </Grid>
            <!--  Confirm Password  -->
            <TextBlock
                Grid.Row="3"
                FontWeight="Bold"
                Text="Confirm Password:" />
            <DockPanel Grid.Row="4" Margin="0,5,0,0">
                <Button
                    Name="ToggleConfirmPasswordVisibilityButton"
                    Margin="5,0,0,0"
                    Command="{Binding ToggleConfirmPasswordVisibilityCommand}"
                    Content="{Binding IsConfirmPasswordVisible, Converter={x:Static converters:BoolToEyeEmojiConverter.Instance}}"
                    DockPanel.Dock="Right"
                    Foreground="LimeGreen"
                    IsEnabled="{Binding AreControlsEnabled}"
                    ToolTip="Toggle password visibility" />
                <PasswordBox
                    x:Name="ConfirmPasswordBox"
                    Height="30"
                    Padding="5"
                    behaviors:PasswordBoxBehavior.AnalyzeStrength="True"
                    behaviors:PasswordBoxBehavior.Attach="True"
                    behaviors:PasswordBoxBehavior.Password="{Binding ConfirmPassword, Mode=TwoWay}"
                    behaviors:PasswordBoxBehavior.PasswordService="{Binding PasswordService}"
                    DockPanel.Dock="Top"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    Visibility="{Binding IsConfirmPasswordVisible, Converter={x:Static converters:BoolToVisibilityConverter.InstanceInverted}}" />
                <TextBox
                    x:Name="ConfirmPasswordTextBox"
                    Height="30"
                    Padding="5"
                    DockPanel.Dock="Top"
                    Foreground="LightGray"
                    IsEnabled="{Binding AreControlsEnabled}"
                    Text="{Binding ConfirmPassword, Mode=TwoWay}"
                    Visibility="{Binding IsConfirmPasswordVisible, Converter={x:Static converters:BoolToVisibilityConverter.Instance}}" />
            </DockPanel>
            <!--  Confirm Password Strength Indicator  -->
            <Grid
                Grid.Row="5"
                Margin="0,2,0,10"
                Visibility="{Binding ElementName=ConfirmPasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthVisibility)}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <ProgressBar
                    Grid.Row="0"
                    Height="5"
                    Background="Transparent"
                    BorderThickness="0"
                    Foreground="{Binding ElementName=ConfirmPasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthColor)}"
                    Maximum="100"
                    Minimum="0"
                    Value="{Binding ElementName=ConfirmPasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthScore)}" />
                <TextBlock
                    Grid.Row="1"
                    FontSize="11"
                    Foreground="{Binding ElementName=ConfirmPasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthColor)}"
                    Text="{Binding ElementName=ConfirmPasswordBox, Path=(behaviors:PasswordBoxBehavior.StrengthText)}" />
            </Grid>
        </Grid>
        <!--  Action Buttons Section  -->
        <Grid Grid.Row="3" Margin="10,0,10,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <TextBlock
                    x:Name="ProgressText"
                    Grid.Row="0"
                    HorizontalAlignment="Center"
                    FontWeight="SemiBold"
                    Text="{Binding ProgressText}" />
                <ProgressBar
                    x:Name="ProgressBar"
                    Grid.Row="1"
                    Height="4"
                    Foreground="LimeGreen"
                    Value="{Binding ProgressValue}" />
            </Grid>
            <Grid
                Grid.Row="1"
                Margin="0,15,0,0"
                HorizontalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Button
                    x:Name="EncryptButton"
                    Grid.Column="0"
                    Margin="0,0,10,0"
                    Padding="20,10"
                    Command="{Binding EncryptFileCommand}"
                    Content="🔒 Encrypt"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="LimeGreen" />
                <Button
                    x:Name="DecryptButton"
                    Grid.Column="1"
                    Margin="0,0,10,0"
                    Padding="20,10"
                    Command="{Binding DecryptFileCommand}"
                    Content="🔓 Decrypt"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="LimeGreen" />
                <Button
                    x:Name="CancelButton"
                    Grid.Column="2"
                    Padding="20,10"
                    Command="{Binding CancelCommand}"
                    Content="❌ Cancel"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Foreground="OrangeRed" />
            </Grid>
        </Grid>
    </Grid>
</Window>
